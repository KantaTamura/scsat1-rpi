From 3a7dc2665db24ce3158b4b4e7bc1e12c36d40ac1 Mon Sep 17 00:00:00 2001
From: KantaTamura <tkanta496@gmail.com>
Date: Fri, 18 Oct 2024 22:35:54 +0900
Subject: [PATCH] Fix build with GCC 14

Signed-off-by: KantaTamura <tkanta496@gmail.com>
---
 com32/chain/chain.c        | 2 +-
 com32/lib/syslinux/debug.c | 1 +
 com32/libupload/tftp.h     | 3 +++
 3 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/com32/chain/chain.c b/com32/chain/chain.c
index 4e9e32d..b11b880 100644
--- a/com32/chain/chain.c
+++ b/com32/chain/chain.c
@@ -514,7 +514,7 @@ int main(int argc, char *argv[])
     if (opt.file) {
 	fdat.base = (opt.fseg << 4) + opt.foff;
 
-	if (loadfile(opt.file, &fdat.data, &fdat.size)) {
+	if (loadfile(opt.file, &fdat.data, (size_t*)&fdat.size)) {
 	    error("Couldn't read the boot file.");
 	    goto bail;
 	}
diff --git a/com32/lib/syslinux/debug.c b/com32/lib/syslinux/debug.c
index d9ab863..e8f53d5 100644
--- a/com32/lib/syslinux/debug.c
+++ b/com32/lib/syslinux/debug.c
@@ -1,6 +1,7 @@
 #include <linux/list.h>
 #include <string.h>
 #include <stdbool.h>
+#include <stdio.h>
 
 #ifdef DYNAMIC_DEBUG
 
diff --git a/com32/libupload/tftp.h b/com32/libupload/tftp.h
index 209d975..99912fe 100644
--- a/com32/libupload/tftp.h
+++ b/com32/libupload/tftp.h
@@ -23,4 +23,7 @@ TFTP_ERR_NO_NETWORK = 12,
 };
 
 extern const char *tftp_string_error_message[];
+
+extern int tftp_put(struct url_info *url, int flags, struct inode *inode,
+                    const char **redir, char *data, int data_length);
 #endif
